= Level 2: Components of the SCS

== Overview Diagram
[plantuml, scs-level-2]
----
@startuml scs-level-2

actor "User" <<User>> as ingress

  database "rollenspiel-cons" <<Postgres>> as data
  circle "Keycloak SSO" as keycloak

component "rollenspiel-cons" <<SCS,spring-boot>> as service {
  component "Frontend" as frontend {
    [Web Application] <<Java, JTE>> as app
    [REST API] <<Java>> as api
  }


  component "Core" as core {
    [Service/Controller] <<Java>> as servicecore
    [Persistence] <<JPA>> as persistence
    component "Domain" <<Java>> as domain {
      [API] <<Java>> as apicore
      [Model] <<Java>> as model
      [Service] <<Java>> as domainservice
    }
    [UMA Client] <<Java>> as uma
  }


  component "Integrations/Services" as integrations {
    [Google Calendar Service] <<Java>> as gcalsvc
    [Discord Bot Service] <<Java>> as discordsvc
    [3words Service] <<Java>> as what3wordssvc
    [OpenStreetMap Service] <<Java>> as osmsvc
  }
}

ingress --> app : HTML
ingress --> api : REST\nGRAPHQL\nJSON

app --> servicecore
api --> servicecore

servicecore --> domainservice
servicecore -left-> persistence
servicecore .down.> apicore
servicecore -right-> uma
domainservice -left-> model
domainservice .left.> apicore
model .left.> apicore

model <-- persistence
persistence -left-> data : Postgres
persistence .down.> apicore

gcalsvc <-up- domainservice
discordsvc <-up-> domainservice
what3wordssvc <-up- domainservice
osmsvc <-up- domainservice

circle "Google Calendar" as gcal
circle "Discord" as discord
circle "OpenStreetMap" as osm
circle "3words" as what3words

gcalsvc -down-> gcal : Java-API
discordsvc <-down-> discord : Java-API
osmsvc -down-> osm : REST
what3wordssvc -down-> what3words : REST
uma -down-> keycloak : REST

@enduml
----

== List of Building Blocks
include::partial$building-blocks-level-2.adoc[]
